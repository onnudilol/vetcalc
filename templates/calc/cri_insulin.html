{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load pipeline %}

{% block title %}
    <title>Insulin CRI for Diabetic Ketoacidosis - VetCalc</title>
{% endblock%}

{% block content %}
    <div class="row">
        <div class="col-md-12">
            {% crispy form %}
        </div>
    </div>

    <div class="row" id="id_cri_insulin_dosages">
        <div class="col-md-12">
            {% for med, dosage in rx.items %}
                <h1><a href="{% url 'info_cri' med.slug %}">{{ med.name }}</a></h1>
                <p><b>Recommended rates:</b> {{ med.recommended_rates }} mmol/kg/hour</p>
                <p><b>30 mL/lb/day maintenance rate:</b> {% if dosage.maint %}<span class="bg-success">{{ dosage.maint }}</span>{% else %}___{% endif %}</p>
                <p><b>30 * weight (kg) + 70 maintenance rate:</b> {% if dosage.maint_plus %}<span class="bg-success">{{ dosage.maint_plus }}</span>{% else %}___{% endif %}</p>
                <p>50 mL of the insulin solution should be allowed to flow through the tubing and be discarded. This will saturate the insulin binding sites on the plastic.</p>
                <p>Supplement glucose when serum level is less than 250 gm/dL.</p>
                <p>Monitor serum phosphorous and supplement when is less than 2.0 mg/dl.</p>
                <p>Hemolysis may indicate significant hypophosphatemia</p>

                <h3>Phosphorus Supplement</h3>
                <p>{% if dosage.phosphorus %}<span class="bg-success">{{ dosage.phosphorus }}</span>{% else %}___{% endif %} mL of 3 mM P/mL have been added to the bag to give
                {% if request.GET.replacement %}<span class="bg-success">{{ request.GET.replacement }}</span>{% else %}___{% endif %} mmol/kg/hour.  Note that this will result in
                an excess of {% if dosage.phosphorus_excess %}<span class="bg-success">{{ dosage.phosphorus_excess }}</span>{% else %}___{% endif %} mEq K/L</p>

                <h3>Feline CRI</h3>
                <p>{% if dosage.units_cat %}<span class="bg-success">{{ dosage.units_cat }}</span>{% else %}___{% endif %} units of regular insulin have been added to
                {% if request.GET.volume %}<span class="bg-success">{{ request.GET.volume }}</span>{% else %}___{% endif %} mL of fluid.  Delivered at
                {% if request.GET.rate %}<span class="bg-success">{{ request.GET.rate }}</span>{% else %}___{% endif %} mL/hour it will give a constant infusion of 1.1 units/kg/day.</p>

                <h3>Canine CRI</h3>
                <p>{% if dosage.units_dog %}<span class="bg-success">{{ dosage.units_dog }}</span>{% else %}___{% endif %} units of regular insulin have been added to
                {% if request.GET.volume %}<span class="bg-success">{{ request.GET.volume }}</span>{% else %}___{% endif %} mL of fluid.  Delivered at
                {% if request.GET.rate %}<span class="bg-success">{{ request.GET.rate }}</span>{% else %}___{% endif %} mL/hour it will give a constant infusion of 2.2 units/kg/day.</p>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    {% javascript 'main' %}
    {% javascript 'calc_cri_insulin' %}
{% endblock %}